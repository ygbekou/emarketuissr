<div fxLayout="row wrap" fxLayoutAlign="none" class="col-gap">
  <div fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="25" fxFlex.lg="25" fxFlex.xl="25">
    <div class="tile tile-primary">
      <div class="tile-heading">
        <span class="pull-left">
          <mat-icon>shopping_cart</mat-icon>
        </span>
        {{'COMMON.ORDER_DETAILS' | translate}}
      </div>
      <div class="tile-body">
        <span class="pull-left">
          <mat-icon>event</mat-icon>
        </span>
        {{order.createDate | date: 'MM/dd/yyyy hh:mm:ss'}}
        <br />
        <span class="pull-left">
          <mat-icon>payment</mat-icon>
        </span>
        {{order.paymentMethod}}
        <br />
        <span class="pull-left">
          <mat-icon>local_shipping</mat-icon>
        </span>
        {{order.shippingMethod}}
      </div>
      <div class="tile-footer">
        <span class="pull-left">
          <mat-icon>store</mat-icon>
        </span>
        <a href="{{order.storeUrl}}" target="_blank">
          {{order.storeName}}
        </a>
      </div>
    </div>
  </div>
  <div fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="25" fxFlex.lg="25" fxFlex.xl="25">
    <div class="tile tile-primary">
      <div class="tile-heading">
        <span class="pull-left">
          <mat-icon>person</mat-icon>
        </span>
        {{'COMMON.CUSTOMER_DETAILS' | translate}}
      </div>
      <div class="tile-body">
        <span class="pull-left">
          <mat-icon>person</mat-icon>
        </span>
        {{order.firstName}} {{order.lastName}}
        <br />
        <span class="pull-left">
          <mat-icon>email</mat-icon>
        </span>
        {{order.email}}
        <br />
        <span class="pull-left">
          <mat-icon>phone</mat-icon>
        </span>
        {{order.telephone}}
      </div>
      <div class="tile-footer">
        <span class="pull-left">
          <mat-icon>store</mat-icon>
        </span>
        <a href="{{order.storeUrl}}" target="_blank">
          {{order.storeName}}
        </a>
      </div>
    </div>
  </div> 
  <div fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="25" fxFlex.lg="25" fxFlex.xl="25">
    <div class="tile tile-primary">
      <div class="tile-heading">
        <span class="pull-left">
          <mat-icon>credit_card</mat-icon>
        </span>
        {{'COMMON.PAYMENT_ADDRESS' | translate}}
      </div>
      <div class="tile-body">
        <span class="pull-left">
          <mat-icon>person</mat-icon>
        </span>
        {{order.paymentfirstName}} {{order.paymentlastName}}
        <br />
        <span class="pull-left">
          <mat-icon>location_on</mat-icon>
        </span>
        {{order.paymentAddress1}} {{order.paymentAddress2}}
        <br />
        {{order.paymentCity}}, {{order.paymentZone}} {{order.paymentPostcode}}

      </div>
      <div class="tile-footer">
        <span class="pull-left">
          <mat-icon>store</mat-icon>
        </span>
        {{order.paymentCountry}}
      </div>
    </div>
  </div>
  <div fxFlex.xs="100" fxFlex.sm="100" fxFlex.md="25" fxFlex.lg="25" fxFlex.xl="25">
    <div class="tile tile-primary">
      <div class="tile-heading">
        <span class="pull-left">
          <mat-icon>local_shipping</mat-icon>
        </span>
        {{'COMMON.SHIPPING_ADDRESS' | translate}}
      </div>
      <div class="tile-body">
        <span class="pull-left">
          <mat-icon>person</mat-icon>
        </span>
        {{order.shippingfirstName}} {{order.shippinglastName}}
        <br />
        <span class="pull-left">
          <mat-icon>location_on</mat-icon>
        </span>
        {{order.shippingAddress1}} {{order.shippingAddress2}}
        <br />
        {{order.shippingCity}}, {{order.shippingZone}} {{order.shippingPostcode}}

      </div>
      <div class="tile-footer">
        <span class="pull-left">
          <mat-icon>store</mat-icon>
        </span>
        {{order.shippingCountry}}
      </div>
    </div>
  </div>
</div>

<div class="table-wrapper">
  <mat-card>
    <h6>{{'COMMON.ORDER' | translate}} (#{{order.id}})</h6>
    <table mat-table [dataSource]="dataSource" matSort class="w-100">
      <!-- Product Column -->
      <ng-container matColumnDef="product">
        <th mat-header-cell *matHeaderCellDef width="20%" mat-sort-header> {{'COMMON.PRODUCT' | translate}} </th>
        <td mat-cell *matCellDef="let orderProduct"> {{orderProduct.name}} </td>
        <td mat-footer-cell *matFooterCellDef>
          <h6>SubTotal</h6>
        </td>
      </ng-container>

      <!-- Model Column -->
      <ng-container matColumnDef="model">
        <th mat-header-cell *matHeaderCellDef width="25%" mat-sort-header> {{'COMMON.MODEL' | translate}} </th>
        <td mat-cell *matCellDef="let orderProduct"> {{orderProduct.model}} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>


      <!-- Quantity Column -->
      <ng-container matColumnDef="quantity">
        <th mat-header-cell *matHeaderCellDef width="10%" mat-sort-header> {{'COMMON.QUANTITY' | translate}} </th>
        <td mat-cell *matCellDef="let orderProduct"> {{orderProduct.quantity}} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <!-- Price Column -->
      <ng-container matColumnDef="price">
        <th mat-header-cell *matHeaderCellDef width="20%" mat-sort-header> {{'COMMON.UNIT_PRICE' | translate}} </th>
        <td mat-cell *matCellDef="let orderProduct"> {{orderProduct.price}} </td>
        <td mat-footer-cell *matFooterCellDef> </td>
      </ng-container>

      <!-- Total Column -->
      <ng-container matColumnDef="total">
        <th mat-header-cell *matHeaderCellDef width="20%" mat-sort-header> {{'COMMON.TOTAL' | translate}} </th>
        <td mat-cell *matCellDef="let orderProduct"> {{orderProduct.total}} </td>
        <td mat-footer-cell *matFooterCellDef>
          <span class="mobile-value bold"> {{ order.total }}</span>
        </td>
      </ng-container>

      <!-- empty footer row-->
      <ng-container matColumnDef="emptyFooter">
        <mat-footer-cell *matFooterCellDef class="mobile-hide"></mat-footer-cell>
      </ng-container>

      <!-- set footer for vat amount-->
      <ng-container matColumnDef="shippingRateTitle">
        <td mat-footer-cell *matFooterCellDef>
          <h6>Shipping Rate</h6>
        </td>
      </ng-container>

      <ng-container matColumnDef="emptyFooter1">
        <td mat-footer-cell *matFooterCellDef>
        </td>
      </ng-container>

      <ng-container matColumnDef="emptyFooter2">
        <td mat-footer-cell *matFooterCellDef>
        </td>
      </ng-container>

      <ng-container matColumnDef="emptyFooter3">
        <td mat-footer-cell *matFooterCellDef>
        </td>
      </ng-container>

      <ng-container matColumnDef="shippingAmount">
        <td mat-footer-cell *matFooterCellDef>{{ order.total }}</td>
      </ng-container>

      <!-- set footer for total amount-->
      <ng-container matColumnDef="totalAmountTitle">
        <td mat-footer-cell *matFooterCellDef>
          <h6>Total</h6>
        </td>
      </ng-container>

      <ng-container matColumnDef="emptyFooter4">
        <td mat-footer-cell *matFooterCellDef>
        </td>
      </ng-container>

      <ng-container matColumnDef="emptyFooter5">
        <td mat-footer-cell *matFooterCellDef>
        </td>
      </ng-container>

      <ng-container matColumnDef="emptyFooter6">
        <td mat-footer-cell *matFooterCellDef>
        </td>
      </ng-container>

      <ng-container matColumnDef="totalAmount">
        <td mat-footer-cell *matFooterCellDef>
          {{ order.total }}
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let order; columns: displayedColumns;"></tr>
      <tr mat-footer-row class="sticky-footer" *matFooterRowDef="displayedColumns"></tr>
      <tr mat-footer-row class="sticky-footer" *matFooterRowDef="displayedShippingColumns"></tr>
      <tr mat-footer-row class="sticky-footer" *matFooterRowDef="displayedTotalColumns"></tr>
    </table>
    <p *ngIf="dataSource?.data.length === 0" class="py-5 mb-0 text-center">{{'MESSAGE.NO_DATA' | translate}}</p>

    <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" showFirstLastButtons></mat-paginator>
  </mat-card>
</div>

<mat-tab-group>
  <mat-tab label="{{'COMMON.ORDER_HISTORY' | translate}}" *ngIf="order.id > 0">
    <app-orderHistory [orderId]="order.id"></app-orderHistory>
  </mat-tab>
  <mat-tab label="{{'COMMON.ADDITIONAL' | translate}}" *ngIf="order.id > 0">
    <mat-card>
      <h6>{{'COMMON.BROWSER' | translate}}</h6>
      <div>
        <div class="proflie-field mb-12">
          <label>{{'COMMON.IP_ADDRESS' | translate}}</label> <span>{{order.ip}}</span>
        </div>
        <div class="proflie-field mb-12">
          <label>{{'COMMON.FORWARDED_IP' | translate}}</label> <span>{{order.forwardedIp}}</span>
        </div>
        <div class="proflie-field mb-12">
          <label>{{'COMMON.USER_AGENT' | translate}}</label> <span>{{order.userAgent}}</span>
        </div>
        <div class="proflie-field mb-12">
          <label>{{'COMMON.ACCEPT_LANGUAGE' | translate}}</label> <span>{{order.acceptLanguage}}</span>
        </div>
      </div>
    </mat-card>
  </mat-tab>
</mat-tab-group>